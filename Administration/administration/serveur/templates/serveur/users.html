{% extends 'serveur/main.html' %}
{% load static %}
{% block title %}Utilisateurs{% endblock %}

{% block content %}
<div class="main-content">
    <header>
        <input type="text" placeholder="Rechercher" class="search-bar">
        <div class="header-icons">
            <span><i class='bx bx-moon'></i></span>
            <span><i class='bx bx-bell'></i></span>
            <span><i class='bx bx-user'></i></span>
            <span><i class='bx bx-cog'></i></span>
        </div>
    </header>
    <section class="dashboard-header">
        <h1>UTILISATEURS</h1>
        <p>Liste des utilisateurs</p>
    </section>
    <section class="users-actions">
        <a href="{% url 'add_utilisateur' %}" class="table-action-add"><i class='bx bx-plus'></i> Ajouter un utilisateur</a>
        <a href="#" class="table-action"><i class='bx bx-table-columns'></i> Colonne</a>
        <button class="table-action"><i class='bx bx-filter'></i> Filtre</button>
        <button class="table-action"><i class='bx bx-archive-arrow-down'></i> Exporter</button>
    </section>
    <section class="users-table-section">
        <div class="users-table-header">
            <input type="checkbox">
            <span>ID</span>
            <span>Nom</span>
            <span>Prénom</span>
            <span>Actions</span>
        </div>
        {% for utilisateur in utilisateurs %}
        <div class="users-table-row">
            <input type="checkbox">
            <span>{{ utilisateur.id }}</span>
            <span>{{ utilisateur.nom }}</span>
            <span>{{ utilisateur.prenom }}</span>
            <span style="position:relative;">
                <button class="action-btn" onclick="toggleDropdown(this)"><i class='bx bx-dots-vertical-rounded'></i></button>
                <div class="dropdown-menu">
                    <a href="{% url 'update_utilisateur' utilisateur.id %}">Modifier</a>
                    <a href="{% url 'delete_utilisateur' utilisateur.id %}">Supprimer</a>
                </div>
            </span>
        </div>
        {% empty %}
        <div class="users-table-row">
            <span colspan="4">Aucun utilisateur trouvé.</span>
        </div>
        {% endfor %}
        <div class="users-table-footer">
            <span>Lignes par page:</span>
            <select>
                <option>100</option>
                <option>50</option>
                <option>25</option>
            </select>
            <span>{{ utilisateurs|length }} utilisateur{{ utilisateurs|length|pluralize }}</span>
            <button class="footer-nav">&lt;</button>
            <button class="footer-nav">&gt;</button>
        </div>
    </section>
</div>
{% endblock %}
